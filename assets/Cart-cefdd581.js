import{M as I}from"./index-9908806f.js";import{_ as L,m as T,a as C,p as V,c as l,b as t,F as h,h as g,f as c,t as i,i as f,v as x,g as M,d as p,w as k,l as E,r as $,o as a,j as A}from"./index-cfe4aeb6.js";import{c as j}from"./cartStore-9f47180b.js";import{s as B}from"./swal-3e866175.js";import{_ as N}from"./Meta_Oculus_Quest2-a216da96.js";import{_ as S}from"./VIVE_XR_ELITE-13af5cce.js";const{VITE_API:q,VITE_PATH:z}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"metaverspace",BASE_URL:"/MetaverSpace",MODE:"production",DEV:!1,PROD:!0,SSR:!1},U={mixins:[B],data(){return{coupon:""}},methods:{deleteAlert(e,o){console.log(o);let m="";o>=0&&(m=`(${e.cart_spec[o].title})`),this.$swal.fire({title:"刪除購物車商品",text:`確定要刪除 ${e.product.title} ${m}？`,icon:"warning",confirmButtonColor:"#FE5F50",confirmButtonText:"確定刪除",backdrop:" rgba(0,0,0,0.8)",showCancelButton:!0,cancelButtonColor:"#6b7280"}).then(y=>{y.isConfirmed&&(o>=0?this.deleteCartSpec(e,o):this.deleteCart(e.id))})},addCoupon(){this.$http.post(`${q}/api/${z}/coupon`,{data:{code:this.coupon}}).then(e=>{this.userToast("success",e.data.message),this.getCart()}).catch(e=>{this.userToast("error",e.response.data.message)})},...T(j,["getCart","updateCart","updateCartSpec","deleteCart","deleteCartSpec"])},computed:{...C(V,["loadings"]),...C(j,["cart","cartLoading"])},mounted(){const e={placement:"top-center",backdrop:"dynamic",backdropClasses:"bg-black bg-opacity-80 fixed inset-0 z-40",closable:!0};this.favoriteModal=new I(this.$refs.favoriteModal,e)}},D={class:"mt-nav"},O={class:"container px-2 md:px-0 pt-8"},P={class:"border-2 rounded-lg xl:mx-48 overflow-hidden"},F={class:"flex justify-between items-center px-4 py-2.5 bg-black/50 border-b-2"},R=t("h1",{class:"text-xl font-bold"},"我的購物車",-1),H={class:"px-8"},G={key:0,class:"mt-10 text-center text-3xl"},Q={key:1},X={class:"flex justify-between items-center"},J=["disabled"],K=t("span",null,"移動至收藏",-1),W={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Y=t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Z=t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),tt=[Y,Z],et={class:"grid grid-cols-12 md:gap-6 mt-6"},st=["src"],ot={class:"col-span-full md:col-span-9 flex flex-col justify-between"},at={class:"flex flex-wrap justify-between items-center"},lt={class:"text-lg lg:text-xl mr-4"},dt={class:"text-xl lg:text-2xl mt-4 lg:mt-6 font-bold"},rt={class:"flex flex-col sm:flex-row justify-between"},nt=["id","value","onChange","disabled"],it=["value"],ct={class:"flex mt-3 sm:mt-0 sm:ml-4"},ut=t("span",{class:"sm:hidden flex items-center text-md lg:text-lg"},"數量：",-1),pt=["onClick","disabled"],bt=["onUpdate:modelValue","onChange","disabled"],mt=["onClick","disabled"],ht=["onClick","disabled"],gt={class:"flex flex-col sm:flex-row justify-between items-center"},ft={key:0,class:"flex items-center self-start mt-6"},xt=t("span",{class:"text-md lg:text-lg"},"數量：",-1),yt={class:"flex sm:mt-0 sm:ml-4"},vt=["onClick","disabled"],_t=["onUpdate:modelValue","onChange","disabled"],wt=["onClick","disabled"],Ct={key:1},kt={class:"self-end text-lg lg:text-xl mt-6"},$t={class:"font-bold"},jt={class:"flex flex-col items-end py-6"},It={class:"mt-4 xs:mt-0 xs:ml-4 text-lg lg:text-xl text-end"},Lt={class:"font-bold whitespace-nowrap"},Tt={class:"mt-4 flex items-center"},Vt={key:0,class:"mt-4 text-warm text-lg lg:text-xl"},Mt={class:"font-bold"},Et={class:"mt-4 text-primary0 text-xl lg:text-2xl text-end"},At={class:"font-bold whitespace-nowrap"},Bt={ref:"favoriteModal",id:"favoriteModal",tabindex:"-1","aria-hidden":"true",class:"fixed top-8 left-0 right-0 z-50 hidden p-4 overflow-x-hidden overflow-y-auto h-[calc(100%-1rem)] md:h-full max-h-[calc(100vh-3rem)]"},Nt={class:"w-full h-full max-w-2xl"},St={class:"rounded-lg overflow-hidden shadow bg-dark"},qt={class:"flex items-start justify-between p-4 border rounded-t-lg border-gray-600 bg-black fixed top-5 w-[calc(100%-2rem)] md:w-full max-w-2xl z-50"},zt=t("h3",{class:"text-lg md:text-xl font-semibold text-white"}," 請選擇商品加入購物車 ",-1),Ut=t("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),Dt=[Ut],Ot=E('<div class="px-4 pt-6"><div class="py-8 grid grid-cols-4 gap-6"><img src="'+N+'" alt="" class="hidden md:flex self-center w-full h-28 object-cover rounded"><div class="col-span-full md:col-span-3 flex flex-col justify-between"><div><div class="flex justify-between items-center"><h2 class="text-lg lg:text-xl">Meta</h2><select id="spec1" class="border text-xs sm:text-sm rounded p-2 bg-gray-600 border-gray-500 text-white focus:ring-primary focus:border-ring-primary"><option selected disabled>選擇規格</option><option value="黑色">黑色</option><option value="白色">白色</option></select></div><h3 class="text-xl lg:text-2xl mt-4"> Oculus Quest 2 256G </h3></div><div><div class="xs:flex justify-between items-end mt-4 md:mt-0"><h5 class="text-lg lg:text-xl"> 售價：<span class="font-bold">NT$ 17,500</span></h5><button type="button" class="mt-5 xs:mt-1 primary-button md:ml-3"> 加入購物車 </button></div></div></div></div><div class="py-8 grid grid-cols-4 gap-6 border-t"><img src="'+S+'" alt="" class="hidden md:flex self-center w-full h-20 md:h-28 object-cover rounded"><div class="col-span-full md:col-span-3 flex flex-col justify-between"><div><div class="flex justify-between items-center"><h2 class="text-lg lg:text-xl">VIVE</h2><select id="spec1" class="border text-xs sm:text-sm rounded p-2 bg-gray-600 border-gray-500 text-white focus:ring-primary focus:border-ring-primary"><option selected disabled>選擇規格</option><option value="黑色">黑色</option><option value="白色">白色</option></select></div><h3 class="text-xl lg:text-2xl mt-4">XR_ELITE</h3></div><div><div class="xs:flex justify-between items-end mt-4 md:mt-0"><h5 class="text-lg lg:text-xl"> 售價：<span class="font-bold">NT$ 34,300</span></h5><button type="button" class="mt-5 xs:mt-1 primary-button md:ml-3"> 加入購物車 </button></div></div></div></div></div>',1);function Pt(e,o,m,y,v,u){var w;const b=$("font-awesome-icon"),_=$("router-link");return a(),l("div",D,[t("div",O,[t("div",P,[t("div",F,[R,t("button",{type:"button",class:"ml-2 dark-solid-button",onClick:o[0]||(o[0]=s=>e.favoriteModal.show())}," 收藏清單 ")]),t("div",H,[(w=Object.keys(e.cart))!=null&&w.length?(a(),l("ul",Q,[(a(!0),l(h,null,g(e.cart.carts,s=>(a(),l("li",{class:"py-8 border-b",key:s.id},[t("div",X,[t("button",{type:"button",class:"w-18 focus:outline-none focus:ring-4 font-medium rounded text-sm px-4 py-2.5 bg-primary hover:bg-primary2 focus:ring-primary3 disabled:bg-primary2 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:e.cartLoading.cartId===s.id},[p(b,{icon:["fas","heart"],class:"mr-2"}),K],8,J),e.cartLoading.cartId!==s.id?(a(),A(b,{key:0,icon:["fas","trash-can"],class:"text-xl lg:text-2xl hover:text-warm cursor-pointer",onClick:d=>u.deleteAlert(s)},null,8,["onClick"])):(a(),l("svg",W,tt))]),t("div",et,[t("img",{src:s.product.imageUrl,alt:"",class:"col-span-3 hidden md:block w-full h-28 lg:h-32 xl:h-40 object-cover rounded bg-white"},null,8,st),t("div",ot,[t("div",at,[t("h2",lt,i(s.product.brand),1),p(_,{to:`/product/${s.product.id}`,target:"_blank",class:"mt-2 sm:mt-0 dark-solid-button py-2 relative whitespace-nowrap"},{default:k(()=>[c(" 查看商品 "),p(b,{icon:["fas","arrow-up-right-from-square"],class:"absolute top-1 right-1 text-sm lg:text-md"})]),_:2},1032,["to"])]),t("h3",dt,i(s.product.title),1),(a(!0),l(h,null,g(s.cart_spec,(d,n)=>(a(),l("div",{class:"flex justify-between sm:justify-start items-start sm:items-center mt-8",key:d.title},[t("div",rt,[t("select",{id:`spec${n}`,class:"border text-sm rounded p-2 bg-gray-600 border-gray-500 text-white focus:ring-primary focus:border-ring-primary",value:d.title,onChange:r=>e.updateCartSpec(s,r.target.value,n),disabled:e.cartLoading.cartId===s.id},[(a(!0),l(h,null,g(s.product.spec,r=>(a(),l("option",{class:"bg-dark/10",key:r,value:r},i(r),9,it))),128))],40,nt),t("div",ct,[ut,t("button",{type:"button",class:"bg-secondary hover:bg-secondary2 px-2 rounded-l text-sm disabled:bg-secondary disabled:text-gray-300 disabled:cursor-not-allowed",onClick:()=>{d.qty-=1,e.updateCart(s,n)},disabled:e.cartLoading.cartId===s.id}," － ",8,pt),f(t("input",{type:"number",class:"w-12 bg-dark text-sm text-end focus:border-secondary disabled:text-gray-500",min:"1",max:"99","onUpdate:modelValue":r=>d.qty=r,onChange:r=>e.updateCart(s,n),disabled:e.cartLoading.cartId===s.id},null,40,bt),[[x,d.qty,void 0,{lazy:!0}]]),t("button",{type:"button",class:"bg-secondary hover:bg-secondary2 px-2 rounded-r text-sm disabled:bg-secondary disabled:text-gray-300 disabled:cursor-not-allowed",onClick:()=>{d.qty+=1,e.updateCart(s,n)},disabled:e.cartLoading.cartId===s.id}," ＋ ",8,mt)])]),p(b,{icon:["fas","xmark"],size:"2xl",class:"sm:hidden hover:text-warm",onClick:r=>u.deleteAlert(s,n)},null,8,["onClick"]),t("button",{type:"button",class:"hidden sm:block ml-8 w-18 focus:outline-none focus:ring-4 font-medium rounded text-sm px-5 py-2.5 bg-warm hover:bg-warm2 focus:ring-warm3 disabled:bg-warm2 disabled:text-gray-300 disabled:cursor-not-allowed",onClick:r=>u.deleteAlert(s,n),disabled:e.cartLoading.cartId===s.id}," 刪除 ",8,ht)]))),128)),t("div",gt,[s.cart_spec?(a(),l("div",Ct)):(a(),l("div",ft,[xt,t("div",yt,[t("button",{type:"button",class:"bg-secondary hover:bg-secondary2 px-2 rounded-l text-sm disabled:bg-secondary disabled:text-gray-300 disabled:cursor-not-allowed",onClick:()=>{s.qty-=1,e.updateCart(s,e.i)},disabled:e.cartLoading.cartId===s.id}," － ",8,vt),f(t("input",{type:"number",class:"w-12 bg-dark text-sm text-end focus:border-secondary disabled:text-gray-500",min:"1",max:"99","onUpdate:modelValue":d=>s.qty=d,onChange:d=>e.updateCart(s,e.i),disabled:e.cartLoading.cartId===s.id},null,40,_t),[[x,s.qty,void 0,{lazy:!0}]]),t("button",{type:"button",class:"bg-secondary hover:bg-secondary2 px-2 rounded-r text-sm disabled:bg-secondary disabled:text-gray-300 disabled:cursor-not-allowed",onClick:()=>{s.qty+=1,e.updateCart(s,e.i)},disabled:e.cartLoading.cartId===s.id}," ＋ ",8,wt)])])),t("h5",kt,[c(" 總計："),t("span",$t,"NT$ "+i(e.$filters.currency(s.total)),1)])])])])]))),128))])):(a(),l("p",G," 購物車讀取中...... ")),t("div",jt,[t("h4",It,[c(" 結帳小計："),t("span",Lt,"NT$ "+i(e.$filters.currency(e.cart.total)),1)]),t("div",Tt,[f(t("input",{type:"text",placeholder:"請輸入優惠碼",class:"border text-sm rounded block w-28 sm:w-36 p-2 bg-gray-700 border-gray-600 placeholder-gray-400 focus:ring-secondary focus:border-secondary","onUpdate:modelValue":o[1]||(o[1]=s=>v.coupon=s)},null,512),[[x,v.coupon]]),t("button",{type:"button",class:"ml-2 w-18 focus:outline-none focus:ring-4 font-medium rounded text-sm px-5 py-2.5 bg-secondary hover:bg-secondary2 focus:ring-secondary3",onClick:o[2]||(o[2]=(...s)=>u.addCoupon&&u.addCoupon(...s))}," 套用 ")]),e.cart.total-e.cart.final_total>0?(a(),l("h5",Vt,[c(" 折扣："),t("span",Mt,"NT$ "+i(e.$filters.currency(Math.ceil(e.cart.total-e.cart.final_total))),1)])):M("",!0),t("h3",Et,[c(" 總金額："),t("span",At,"NT$ "+i(e.$filters.currency(e.cart.final_total)),1)]),p(_,{to:{name:"結帳"},class:"mt-8 primary-button"},{default:k(()=>[c("前往結帳")]),_:1})])])]),t("div",Bt,[t("div",Nt,[t("div",St,[t("div",qt,[zt,t("button",{type:"button",class:"text-gray-400 bg-transparent rounded-lg text-sm p-1.5 ml-auto inline-flex items-center hover:bg-gray-600 hover:text-white",onClick:o[3]||(o[3]=s=>e.favoriteModal.hide())},Dt)]),Ot])])],512)])])}const Jt=L(U,[["render",Pt]]);export{Jt as default};
