import{P as v,D as y}from"./DeleteModal-489c2954.js";import{M as C}from"./index-9908806f.js";import{_ as x,r as _,o as n,c as l,b as t,h,t as c,F as f,g as w,d as m,f as M,a as k,l as E}from"./index-bcb3825a.js";import{s as $}from"./swal-e4da1902.js";const P={data(){return{tempContact:{}}},methods:{openModal(e){this.tempContact={...e},this.contactModal.show()}},mounted(){const e={placement:"center",backdrop:"dynamic",backdropClasses:"bg-black bg-opacity-80 fixed inset-0 z-30",closable:!0};this.contactModal=new C(this.$refs.contactModal,e)}},D={ref:"contactModal",id:"contactModal",tabindex:"-1",class:"hidden fixed z-40 w-full px-4 overflow-x-hidden overflow-y-auto top-28 left-0 right-0 h-auto"},I={class:"w-full max-w-2xl h-full max-h-[calc(100vh-8.5rem)]"},L={class:"bg-white shadow rounded-lg overflow-hidden"},T={class:"flex items-start justify-between p-4 border-b bg-black top-[6rem] w-[calc(100%-2rem)] max-w-2xl z-50 rounded-t-lg fixed"},V=t("h3",{class:"text-xl font-semibold text-gray-300"},"檢視留言",-1),A=t("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),R=[A],S={class:"p-6 mt-12"},B={class:"w-full max-w-xl mx-auto space-y-6"},N={class:"text-lg"},j={class:"ml-6"},z={class:"text-lg"},F={class:"ml-6"},O={class:"text-lg"},U={class:"ml-4"},q={key:0},H=t("h2",{class:"text-lg"},"圖片檢視",-1),G={class:"grid grid-cols-5 gap-3"},J={type:"button",class:"admin-secondary-button w-full py-2 relative"},K=["href"],Q=["src","alt"],W=t("h2",{class:"text-lg"},"遇到的問題：",-1),X={class:"mt-2 text-md"};function Y(e,a,i,r,s,u){var p;const g=_("FontAwesomeIcon");return n(),l("div",D,[t("div",I,[t("div",L,[t("div",T,[V,t("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-600 hover:text-white rounded-lg text-sm p-1.5 ml-auto inline-flex items-center",onClick:a[0]||(a[0]=d=>e.contactModal.hide())},R)]),t("div",S,[t("div",B,[t("div",null,[t("h2",N,[h(" 姓名："),t("span",j,c(s.tempContact.name),1)])]),t("div",null,[t("h2",z,[h(" 電話："),t("span",F,c(s.tempContact.tel),1)])]),t("div",null,[t("h2",O,[h(" Email："),t("span",U,c(s.tempContact.email),1)])]),(p=s.tempContact.images)!=null&&p.length?(n(),l("div",q,[H,t("ul",G,[(n(!0),l(f,null,w(s.tempContact.images,(d,o)=>(n(),l("li",{key:o,class:"mt-4"},[t("button",J,[t("a",{href:d.src,target:"_blank"},[m(g,{icon:["fas","arrow-up-right-from-square"],class:"absolute top-1 right-1 text-md"}),h(" 查看圖片 ")],8,K)]),t("img",{src:d.src,class:"w-full h-28 object-cover rounded-sm mt-2",alt:`上傳的圖片${o}`},null,8,Q)]))),128))])])):M("",!0),t("div",null,[W,t("p",X,c(s.tempContact.content),1)])])])])])],512)}const Z=x(P,[["render",Y]]),{VITE_RENDER_API:tt}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"metaverspace",VITE_RENDER_API:"https://metarverspace-server.onrender.com",BASE_URL:"/MetaverSpace/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},et={mixins:[$],data(){return{allContacts:[],contacts:[],pagination:{},titleBranch:""}},methods:{getContacts(e=1,a){this.loadings.fullLoading=!0,this.$http.get(`${tt}/contacts`).then(i=>{this.allContacts=i.data.sort((r,s)=>s.id-r.id),this.filterContacts(e),this.loadings.fullLoading=!1,a==="delete"&&this.adminToast("success","已刪除預約資料")}).catch(i=>{this.loadings.fullLoading=!1,this.userToast("error",i.message)})},filterContacts(e=1){this.contacts=this.allContacts.filter((i,r)=>Math.ceil((r+1)/10)===e);const a=Math.ceil(this.allContacts.length/10);this.pagination={total_pages:a,current_page:e,has_pre:e!==1,has_next:e!==a},window.scrollTo({top:0,behavior:"smooth"})}},computed:{...k(E,["loadings"])},mounted(){this.contactModal=this.$refs.contactModal,this.deleteModal=this.$refs.deleteModal,this.getContacts()},components:{Pagination:v,ContactModal:Z,DeleteModal:y}},st={class:"mt-8 px-6"},ot={class:"mt-6 relative overflow-x-auto shadow-md sm:rounded-lg"},at={class:"w-full text-md text-left text-gray-700"},nt=t("thead",{class:"text-sm text-dark uppercase bg-gray-300"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap"},"姓名"),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap"},"電話"),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap"},"Email"),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap"},[t("span",{class:"sr-only"},"選項")])])],-1),lt={class:"px-6 py-4 whitespace-nowrap"},ct={class:"px-6 py-4 whitespace-nowrap"},it={class:"px-6 py-4 whitespace-nowrap"},rt={class:"px-6 py-4 whitespace-nowrap flex justify-center space-x-6"},dt=["onClick"],pt=["onClick"];function ht(e,a,i,r,s,u){const g=_("Pagination"),p=_("ContactModal"),d=_("DeleteModal");return n(),l(f,null,[t("div",st,[t("div",ot,[t("table",at,[nt,t("tbody",null,[(n(!0),l(f,null,w(s.contacts,o=>(n(),l("tr",{class:"bg-white border-b hover:bg-teal-100",key:o.id},[t("td",lt,c(o.name),1),t("td",ct,c(o.tel),1),t("td",it,c(o.email),1),t("td",rt,[t("button",{type:"button",class:"admin-secondary-button px-3.5 py-1.5",onClick:b=>e.contactModal.openModal(o)}," 檢視 ",8,dt),t("button",{type:"button",class:"admin-delete-button px-3.5 py-1.5",onClick:b=>e.deleteModal.openModal("留言",o)}," 刪除 ",8,pt)])]))),128))])])]),m(g,{class:"mt-8","page-obj":s.pagination,onEmitPage:u.getContacts},null,8,["page-obj","onEmitPage"])]),m(p,{ref:"contactModal",page:s.pagination.current_page},null,8,["page"]),m(d,{ref:"deleteModal",page:s.contacts.length>1?s.pagination.current_page:s.pagination.current_page-1,onUpdateContacts:u.getContacts},null,8,["page","onUpdateContacts"])],64)}const ft=x(et,[["render",ht]]);export{ft as default};
