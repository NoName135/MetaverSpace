import{P as v,D as y}from"./DeleteModal-efa68655.js";import{M as C}from"./index-9908806f.js";import{_ as x,r as _,o as n,c as l,b as t,h,t as c,F as f,g as w,d as m,f as M,a as k,l as $}from"./index-3e4271c3.js";import{s as L}from"./swal-e4da1902.js";const P={data(){return{tempContact:{}}},methods:{openModal(e){this.tempContact={...e},this.contactModal.show()}},mounted(){const e={placement:"center",backdrop:"dynamic",backdropClasses:"bg-black bg-opacity-80 fixed inset-0 z-30",closable:!0};this.contactModal=new C(this.$refs.contactModal,e)}},j={ref:"contactModal",id:"contactModal",tabindex:"-1",class:"hidden fixed z-40 w-full px-4 overflow-x-hidden overflow-y-auto top-28 left-0 right-0 h-auto"},B={class:"w-full max-w-2xl h-full max-h-[calc(100vh-8.5rem)]"},D={class:"bg-white shadow rounded-lg overflow-hidden"},E={class:"flex items-start justify-between p-4 border-b bg-black top-[6rem] w-[calc(100%-2rem)] max-w-2xl z-50 rounded-t-lg fixed"},z=t("h3",{class:"text-xl font-semibold text-gray-300"},"檢視留言",-1),N=t("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),T=[N],V={class:"p-6 mt-12"},S={class:"w-full max-w-xl mx-auto space-y-6"},F={class:"text-lg"},U={class:"ml-6"},q={class:"text-lg"},O={class:"ml-6"},A={class:"text-lg"},G={class:"ml-4"},H={key:0},I=t("h2",{class:"text-lg"},"圖片檢視",-1),J={class:"grid grid-cols-5 gap-3"},K={type:"button",class:"admin-secondary-button w-full py-2 relative"},Q=["href"],R=["src"],W=t("h2",{class:"text-lg"},"遇到的問題：",-1),X={class:"mt-2 text-md"};function Y(e,o,i,r,s,u){var p;const g=_("font-awesome-icon");return n(),l("div",j,[t("div",B,[t("div",D,[t("div",E,[z,t("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-600 hover:text-white rounded-lg text-sm p-1.5 ml-auto inline-flex items-center",onClick:o[0]||(o[0]=d=>e.contactModal.hide())},T)]),t("div",V,[t("div",S,[t("div",null,[t("h2",F,[h(" 姓名："),t("span",U,c(s.tempContact.name),1)])]),t("div",null,[t("h2",q,[h(" 電話："),t("span",O,c(s.tempContact.tel),1)])]),t("div",null,[t("h2",A,[h(" Email："),t("span",G,c(s.tempContact.email),1)])]),(p=s.tempContact.images)!=null&&p.length?(n(),l("div",H,[I,t("ul",J,[(n(!0),l(f,null,w(s.tempContact.images,(d,a)=>(n(),l("li",{key:a,class:"mt-4"},[t("button",K,[t("a",{href:d.src,target:"_blank"},[m(g,{icon:["fas","arrow-up-right-from-square"],class:"absolute top-1 right-1 text-md"}),h(" 查看圖片 ")],8,Q)]),t("img",{src:d.src,class:"w-full h-28 object-cover rounded-sm mt-2"},null,8,R)]))),128))])])):M("",!0),t("div",null,[W,t("p",X,c(s.tempContact.content),1)])])])])])],512)}const Z=x(P,[["render",Y]]),tt={mixins:[L],data(){return{allContacts:[],contacts:[],pagination:{},titleBranch:""}},methods:{getContacts(e=1,o){this.loadings.fullLoading=!0,this.$http.get("https://metarverspace-server.onrender.com/contacts").then(i=>{this.allContacts=i.data.sort((r,s)=>s.id-r.id),this.filterContacts(e),this.loadings.fullLoading=!1,o==="delete"&&this.adminToast("success","已刪除預約資料")}).catch(i=>{this.loadings.fullLoading=!1,this.userToast("error",i.message)})},filterContacts(e=1){this.contacts=this.allContacts.filter((i,r)=>Math.ceil((r+1)/10)==e);const o=Math.ceil(this.allContacts.length/10);this.pagination={total_pages:o,current_page:e,has_pre:e!==1,has_next:e!==o},window.scrollTo({top:0,behavior:"smooth"})}},computed:{...k($,["loadings"])},mounted(){this.contactModal=this.$refs.contactModal,this.deleteModal=this.$refs.deleteModal,this.getContacts()},components:{Pagination:v,ContactModal:Z,DeleteModal:y}},et={class:"mt-8 px-6"},st={class:"mt-6 relative overflow-x-auto shadow-md sm:rounded-lg"},ot={class:"w-full text-md text-left text-gray-700"},at=t("thead",{class:"text-sm text-dark uppercase bg-gray-300"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap"},"姓名"),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap"},"電話"),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap"},"Email"),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap"},[t("span",{class:"sr-only"},"選項")])])],-1),nt={class:"px-6 py-4 whitespace-nowrap"},lt={class:"px-6 py-4 whitespace-nowrap"},ct={class:"px-6 py-4 whitespace-nowrap"},it={class:"px-6 py-4 whitespace-nowrap flex justify-center space-x-6"},rt=["onClick"],dt=["onClick"];function pt(e,o,i,r,s,u){const g=_("Pagination"),p=_("ContactModal"),d=_("DeleteModal");return n(),l(f,null,[t("div",et,[t("div",st,[t("table",ot,[at,t("tbody",null,[(n(!0),l(f,null,w(s.contacts,a=>(n(),l("tr",{class:"bg-white border-b hover:bg-teal-100",key:a.id},[t("td",nt,c(a.name),1),t("td",lt,c(a.tel),1),t("td",ct,c(a.email),1),t("td",it,[t("button",{type:"button",class:"admin-secondary-button px-3.5 py-1.5",onClick:b=>e.contactModal.openModal(a)}," 檢視 ",8,rt),t("button",{type:"button",class:"admin-delete-button px-3.5 py-1.5",onClick:b=>e.deleteModal.openModal("留言",a)}," 刪除 ",8,dt)])]))),128))])])]),m(g,{class:"mt-8","page-obj":s.pagination,onEmitPage:u.getContacts},null,8,["page-obj","onEmitPage"])]),m(p,{ref:"contactModal",page:s.pagination.current_page},null,8,["page"]),m(d,{ref:"deleteModal",page:s.contacts.length>1?s.pagination.current_page:s.pagination.current_page-1,onUpdateContacts:u.getContacts},null,8,["page","onUpdateContacts"])],64)}const gt=x(tt,[["render",pt]]);export{gt as default};
