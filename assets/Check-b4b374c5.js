import{C as j}from"./index-9908806f.js";import{_ as k,a as C,l as T,c as n,b as e,t as s,F as m,g as f,f as $,o as d,n as L,h as x}from"./index-29ad0527.js";import{s as E}from"./swal-3e866175.js";const{VITE_API:g,VITE_PATH:b}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"metaverspace",BASE_URL:"/MetaverSpace",MODE:"production",DEV:!1,PROD:!0,SSR:!1},S={emits:["emit-step"],mixins:[E],data(){return{order:{},discount:0,payLoading:!1}},methods:{getOrder(){this.loadings.fullLoading=!0,this.$http.get(`${g}/api/${b}/order/${this.$route.params.id}`).then(t=>{this.loadings.fullLoading=!1,this.order=t.data.order,this.discount=Object.values(this.order.products).reduce((l,a)=>l+(a.total-a.final_total),0)}).catch(t=>{this.loadings.fullLoading=!1,this.userToast("error",t.response.data.message)})},payOrder(){this.payLoading=!0,this.$http.post(`${g}/api/${b}/pay/${this.$route.params.id}`).then(t=>{this.payLoading=!1,this.userToast("success",t.data.message),this.$router.replace(`/checkout/send/${this.$route.params.id}`)}).catch(t=>{this.payLoading=!1,this.userToast("error",t.response.data.message)})}},computed:{...C(T,["loadings"])},mounted(){this.$emit("emit-step",2);const t={onToggle:l=>{l._visible?l._triggerEl.querySelector("[data-accordion-icon]").classList.add("-rotate-180"):l._triggerEl.querySelector("[data-accordion-icon]").classList.remove("-rotate-180")}};this.detailCollapse=new j(this.$refs.detailCollapseMenu,this.$refs.detailCollapseBtn,t),this.detailCollapse.collapse(),this.getOrder()}},V={class:"lg:pt-8"},O={class:"border-2 rounded-lg"},B=e("h1",{class:"p-4 bg-black/50 text-xl font-bold border-b-2"},"訂單內容",-1),I={class:"py-8 flex flex-col"},M={class:"mx-auto text-md md:text-lg px-6 md:px-0 w-full md:w-[450px] lg:w-[565px] xl:w-[620px]"},A={class:"mb-4 leading-loose xs:flex justify-between"},N=e("p",null,"訂單編號：",-1),P={class:"mb-4 leading-loose xs:flex justify-between"},q=e("p",null,"訂單日期：",-1),D={class:"mb-4 leading-loose xs:flex justify-between"},R=e("p",null,"訂購人姓名：",-1),z={class:"mb-4 leading-loose xs:flex justify-between"},F=e("p",null,"訂購人電話：",-1),H={class:"mb-4 leading-loose xs:flex justify-between"},U=e("p",null,"訂購人Email：",-1),G={class:"mb-4 leading-loose xs:flex justify-between"},J=e("p",{class:"whitespace-nowrap mr-4"},"訂購人地址：",-1),K={class:"text-end"},Q={class:"mb-4 leading-loose xs:flex justify-between"},W=e("p",null,"付款方式：",-1),X={class:"mb-6 leading-loose xs:flex justify-between"},Y=e("p",null,"訂單金額：",-1),Z={class:"font-bold"},ee={class:"mb-10 md:mb-0"},se={type:"button",ref:"detailCollapseBtn",class:"flex justify-around items-center w-28 focus:outline-none font-medium rounded-lg text-sm text-white p-1.5 bg-secondary hover:bg-secondary2"},te=e("p",null,"訂單內容",-1),oe=e("svg",{"data-accordion-icon":"",class:"w-6 h-6 shrink-0 duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13l-3 3m0 0l-3-3m3 3V8m0 13a9 9 0 110-18 9 9 0 010 18z"})],-1),le=[te,oe],ie={ref:"detailCollapseMenu",class:"px-2 md:px-4 border-2 rounded mb-10"},ne=["src"],de={class:"col-span-full md:col-span-4 flex flex-col justify-between"},ae={class:"text-md xl:text-lg"},re={class:"text-lg xl:text-xl mt-2 lg:mt-3"},ce={class:"flex flex-col sm:flex-row justify-between"},_e={class:"flex mt-1 sm:mt-0 sm:ml-4"},he={class:"flex flex-col sm:flex-row justify-between items-center"},ue={key:0,class:"flex items-center self-start mt-4"},pe={class:"text-md lg:text-lg"},me={key:1},fe={class:"self-end text-lg lg:text-xl mt-4"},xe={class:"font-bold"},ge={key:0,class:"border-t border-gray-300"},be={class:"text-warm text-lg py-4 text-end"},ye={class:"flex justify-end"},we=["disabled"];function ve(t,l,a,je,o,y){var c,_,h,u,p;return d(),n("div",V,[e("section",O,[B,e("div",I,[e("div",M,[e("h5",A,[N,e("span",null,s(o.order.id),1)]),e("h5",P,[q,e("span",null,s(t.$filters.date(o.order.create_at)),1)]),e("h5",D,[R,e("span",null,s((c=o.order.user)==null?void 0:c.name),1)]),e("h5",z,[F,e("span",null,s((_=o.order.user)==null?void 0:_.tel),1)]),e("h5",H,[U,e("span",null,s((h=o.order.user)==null?void 0:h.email),1)]),e("h5",G,[J,e("span",K,s((u=o.order.user)==null?void 0:u.address),1)]),e("h5",Q,[W,e("span",null,s((p=o.order.user)==null?void 0:p.pay),1)]),e("h5",X,[Y,e("span",Z,"NT$ "+s(t.$filters.currency(o.order.total)),1)]),e("div",null,[e("div",ee,[e("button",se,le,512),e("div",ie,[(d(!0),n(m,null,f(o.order.products,(i,w,v)=>(d(),n("div",{class:L(["py-8 grid grid-cols-5 gap-4",{"border-t":v>0}]),key:w},[e("img",{src:i.product.imageUrl,alt:"",class:"hidden md:flex w-full h-16 xl:h-24 object-cover rounded bg-white"},null,8,ne),e("div",de,[e("h2",ae,s(i.product.brand),1),e("h3",re,s(i.product.title),1),(d(!0),n(m,null,f(i.cart_spec,r=>(d(),n("div",{class:"flex items-start sm:items-center mt-4 text-md xl:text-lg",key:r.title},[e("div",ce,[x(" 規格："+s(r.title)+" ",1),e("div",_e," 數量："+s(r.qty),1)])]))),128)),e("div",he,[i.cart_spec?(d(),n("div",me)):(d(),n("div",ue,[e("span",pe,"數量："+s(i.qty),1)])),e("h5",fe,[x(" 總計："),e("span",xe,"NT$ "+s(t.$filters.currency(i.total)),1)])])])],2))),128)),o.discount?(d(),n("div",ge,[e("p",be," 折扣："+s(o.discount),1)])):$("",!0)],512)]),e("div",ye,[e("button",{type:"button",class:"w-full md:w-36 primary-button",disabled:o.payLoading,onClick:l[0]||(l[0]=i=>y.payOrder())}," 確認付款 ",8,we)])])])])])])}const $e=k(S,[["render",ve]]);export{$e as default};
