import{P as v,D as y}from"./DeleteModal-06a54686.js";import{M as C}from"./index-9908806f.js";import{_ as x,r as h,o as c,c as i,b as t,h as p,t as a,F as f,g as w,d as _,a as M,l as $}from"./index-09e68c4e.js";import{s as k}from"./swal-e4da1902.js";const L={data(){return{tempContact:{}}},methods:{openModal(e){this.tempContact={...e},this.contactModal.show()}},mounted(){const e={placement:"center",backdrop:"dynamic",backdropClasses:"bg-black bg-opacity-80 fixed inset-0 z-30",closable:!0};this.contactModal=new C(this.$refs.contactModal,e)}},P={ref:"contactModal",id:"contactModal",tabindex:"-1",class:"hidden fixed z-40 w-full px-4 overflow-x-hidden overflow-y-auto top-28 left-0 right-0 h-auto"},j={class:"w-full max-w-2xl h-full max-h-[calc(100vh-8.5rem)]"},B={class:"bg-white shadow rounded-lg overflow-hidden"},D={class:"flex items-start justify-between p-4 border-b bg-black top-[6rem] w-[calc(100%-2rem)] max-w-2xl z-50 rounded-t-lg fixed"},E=t("h3",{class:"text-xl font-semibold text-gray-300"},"檢視留言",-1),z=t("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),T=[z],N={class:"p-6 mt-12"},S={class:"w-full max-w-xl mx-auto space-y-6"},V={class:"text-lg"},F={class:"ml-6"},U={class:"text-lg"},q={class:"ml-6"},O={class:"text-lg"},A={class:"ml-4"},G=t("h2",{class:"text-lg"},"圖片檢視",-1),H={class:"grid grid-cols-5 gap-3"},I={type:"button",class:"admin-secondary-button w-full py-2 relative"},J=["href"],K=["src"],Q=t("h2",{class:"text-lg"},"遇到的問題：",-1),R={class:"mt-2 text-md"};function W(e,o,n,d,s,m){const u=h("font-awesome-icon");return c(),i("div",P,[t("div",j,[t("div",B,[t("div",D,[E,t("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-600 hover:text-white rounded-lg text-sm p-1.5 ml-auto inline-flex items-center",onClick:o[0]||(o[0]=r=>e.contactModal.hide())},T)]),t("div",N,[t("div",S,[t("div",null,[t("h2",V,[p(" 姓名："),t("span",F,a(s.tempContact.name),1)])]),t("div",null,[t("h2",U,[p(" 電話："),t("span",q,a(s.tempContact.tel),1)])]),t("div",null,[t("h2",O,[p(" Email："),t("span",A,a(s.tempContact.email),1)])]),t("div",null,[G,t("ul",H,[(c(!0),i(f,null,w(s.tempContact.images,(r,g)=>(c(),i("li",{key:g,class:"mt-4"},[t("button",I,[t("a",{href:r.src,target:"_blank"},[_(u,{icon:["fas","arrow-up-right-from-square"],class:"absolute top-1 right-1 text-md"}),p(" 查看圖片 ")],8,J)]),t("img",{src:r.src,class:"w-full h-28 object-cover rounded-sm mt-2"},null,8,K)]))),128))])]),t("div",null,[Q,t("p",R,a(s.tempContact.content),1)])])])])])],512)}const X=x(L,[["render",W]]),Y={mixins:[k],data(){return{allContacts:[],contacts:[],pagination:{},titleBranch:""}},methods:{getContacts(e=1,o){this.loadings.fullLoading=!0,this.$http.get("https://metarverspace-server.onrender.com/contacts").then(n=>{this.allContacts=n.data.sort((d,s)=>s.id-d.id),this.filterContacts(e),this.loadings.fullLoading=!1,o==="delete"&&this.adminToast("success","已刪除預約資料")}).catch(n=>{this.loadings.fullLoading=!1,this.userToast("error",n.message)})},filterContacts(e=1){this.contacts=this.allContacts.filter((n,d)=>Math.ceil((d+1)/10)==e);const o=Math.ceil(this.allContacts.length/10);this.pagination={total_pages:o,current_page:e,has_pre:e!==1,has_next:e!==o},window.scrollTo({top:0,behavior:"smooth"})}},computed:{...M($,["loadings"])},mounted(){this.contactModal=this.$refs.contactModal,this.deleteModal=this.$refs.deleteModal,this.getContacts()},components:{Pagination:v,ContactModal:X,DeleteModal:y}},Z={class:"mt-8 px-6"},tt={class:"mt-6 relative overflow-x-auto shadow-md sm:rounded-lg"},et={class:"w-full text-md text-left text-gray-700"},st=t("thead",{class:"text-sm text-dark uppercase bg-gray-300"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap"},"姓名"),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap"},"電話"),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap"},"Email"),t("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap"},[t("span",{class:"sr-only"},"選項")])])],-1),ot={class:"px-6 py-4 whitespace-nowrap"},at={class:"px-6 py-4 whitespace-nowrap"},nt={class:"px-6 py-4 whitespace-nowrap"},lt={class:"px-6 py-4 whitespace-nowrap flex justify-center space-x-6"},ct=["onClick"],it=["onClick"];function dt(e,o,n,d,s,m){const u=h("Pagination"),r=h("ContactModal"),g=h("DeleteModal");return c(),i(f,null,[t("div",Z,[t("div",tt,[t("table",et,[st,t("tbody",null,[(c(!0),i(f,null,w(s.contacts,l=>(c(),i("tr",{class:"bg-white border-b hover:bg-teal-100",key:l.id},[t("td",ot,a(l.name),1),t("td",at,a(l.tel),1),t("td",nt,a(l.email),1),t("td",lt,[t("button",{type:"button",class:"admin-secondary-button px-3.5 py-1.5",onClick:b=>e.contactModal.openModal(l)}," 檢視 ",8,ct),t("button",{type:"button",class:"admin-delete-button px-3.5 py-1.5",onClick:b=>e.deleteModal.openModal("留言",l)}," 刪除 ",8,it)])]))),128))])])]),_(u,{class:"mt-8","page-obj":s.pagination,onEmitPage:m.getContacts},null,8,["page-obj","onEmitPage"])]),_(r,{ref:"contactModal",page:s.pagination.current_page},null,8,["page"]),_(g,{ref:"deleteModal",page:s.pagination.current_page,onUpdateContacts:m.getContacts},null,8,["page","onUpdateContacts"])],64)}const mt=x(Y,[["render",dt]]);export{mt as default};
