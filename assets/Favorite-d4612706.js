import{f as _}from"./favoriteStore-46484bd2.js";import{c as p}from"./cartStore-97cb8960.js";import{_ as C,m as h,a as u,c as a,b as t,f,F as x,g,r as v,o,n as F,d as b,w as $,h as w,j as B,t as n,i as j,z as V}from"./index-1ed9712d.js";import{s as T}from"./swal-3e866175.js";const N={mixins:[T],methods:{moveToCart(e,c){this.cart.carts.some(i=>i.product_id===e.id)?this.userToast("warning","此商品已在購物車"):this.addCart(e,1,c)},deleteFavorite(e){this.$swal.fire({title:"刪除收藏商品",text:`確定要刪除 ${e.title}？`,icon:"warning",confirmButtonColor:"#FE5F50",confirmButtonText:"確定刪除",backdrop:" rgba(0,0,0,0.8)",showCancelButton:!0,cancelButtonColor:"#6b7280"}).then(c=>{c.isConfirmed&&this.updateFavorite(e)})},...h(_,["getFavorite","updateFavorite"]),...h(p,["addCart"])},computed:{...u(_,["favorites","cart_specs"]),...u(p,["cartLoading","cart"])},mounted(){}},S={class:"mt-nav"},z={class:"container px-2 md:px-0 pt-8"},L={class:"border-2 rounded-lg xl:mx-48 overflow-hidden"},M=t("h1",{class:"p-4 bg-black/50 text-xl font-bold border-b-2"},"收藏清單",-1),U={key:0,class:"mt-10 text-center text-2xl md:text-3xl"},A={class:"px-8 pb-4"},D={class:"flex justify-between items-center mb-4"},E={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},I=t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),q=t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),H=[I,q],G={class:"grid grid-cols-5 gap-6"},J=["src"],K={class:"col-span-full md:col-span-4 flex flex-col justify-between"},O={class:"text-lg lg:text-xl"},P={class:"text-xl lg:text-2xl mt-4 lg:mt-6"},Q={class:"md:flex justify-between items-center mt-4"},R={class:"text-lg lg:text-xl"},W={class:"font-bold"},X={class:"flex flex-col sm:flex-row justify-between sm:justify-end items-end md:items-end mt-4 md:mt-1"},Y={key:0,class:"text-sm sm:mr-3"},Z={key:1},tt=["id","onUpdate:modelValue"],et=t("option",{selected:"",disabled:"",value:"",class:"bg-dark/10"}," 選擇規格 ",-1),st=["value"],ot=["disabled","onClick"];function at(e,c,i,rt,lt,d){const m=v("font-awesome-icon"),k=v("router-link");return o(),a("div",S,[t("div",z,[t("div",L,[M,e.favorites.length?f("",!0):(o(),a("p",U," 收藏清單沒有商品 ")),t("ul",A,[(o(!0),a(x,null,g(e.favorites,(s,r)=>(o(),a("li",{class:F(["py-8",{"border-t":r>0}]),key:s.id},[t("div",D,[b(k,{to:`/product/${s.id}`,target:"_blank",class:"mt-2 sm:mt-0 sm:mr-4 dark-solid-button py-2 relative whitespace-nowrap"},{default:$(()=>[w(" 查看商品 "),b(m,{icon:["fas","arrow-up-right-from-square"],class:"absolute top-1 right-1 text-sm lg:text-md"})]),_:2},1032,["to"]),e.cartLoading.cartId!==s.id?(o(),B(m,{key:0,icon:["fas","trash-can"],class:"text-xl lg:text-2xl hover:text-warm cursor-pointer",onClick:l=>d.deleteFavorite(s)},null,8,["onClick"])):(o(),a("svg",E,H))]),t("div",G,[t("img",{src:s.imageUrl,alt:"",class:"hidden md:flex self-center w-full h-28 lg:h-32 xl:h-40 object-cover rounded bg-white"},null,8,J),t("div",K,[t("h2",O,n(s.brand),1),t("h3",P,n(s.title),1),t("div",null,[t("div",Q,[t("h5",R,[w(" 售價："),t("span",W,"NT$ "+n(e.$filters.currency(s.price)),1)]),t("div",X,[s.spec?(o(),a("p",Y," ※ 請先選擇規格 ")):(o(),a("div",Z)),s.spec?j((o(),a("select",{key:2,id:`spec${r}`,class:"mt-4 sm:mt-0 border text-sm rounded p-2 bg-gray-600 border-gray-500 text-white focus:ring-primary","onUpdate:modelValue":l=>e.cart_specs[r]=l},[et,(o(!0),a(x,null,g(s.spec,(l,y)=>(o(),a("option",{key:y,value:l,class:"bg-dark/10"},n(l),9,st))),128))],8,tt)),[[V,e.cart_specs[r]]]):f("",!0),t("button",{type:"button",class:"mt-4 sm:mt-0 primary-button sm:ml-3",disabled:s.spec&&!e.cart_specs[r]||e.cartLoading.cartId===s.id,onClick:l=>d.moveToCart(s,e.cart_specs[r])}," 加入購物車 ",8,ot)])])])])])],2))),128))])])])])}const mt=C(N,[["render",at]]);export{mt as default};
