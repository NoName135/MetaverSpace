import{C as y}from"./index-9908806f.js";import{_ as k,a as j,l as C,c as o,b as e,d as E,w as S,t as s,F as c,g as x,f as _,p as T,r as V,o as l,h,n as A}from"./index-3ca5acb4.js";import{s as B}from"./swal-3e866175.js";const{VITE_API:L,VITE_PATH:M}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"metaverspace",BASE_URL:"/MetaverSpace",MODE:"production",DEV:!1,PROD:!0,SSR:!1},N={emits:["emit-step"],mixins:[B],data(){return{order:{},discount:0}},methods:{getOrder(){this.loadings.fullLoading=!0,this.$http.get(`${L}/api/${M}/order/${this.$route.params.id}`).then(n=>{this.loadings.fullLoading=!1,this.order=n.data.order,this.discount=Object.values(this.order.products).reduce((i,r)=>i+(r.total-r.final_total),0)}).catch(n=>{this.loadings.fullLoading=!1,this.userToast("error",n.response.data.message)})}},computed:{...j(C,["loadings"])},mounted(){this.$emit("emit-step",3);const n={onToggle:i=>{i._visible?i._triggerEl.querySelector("[data-accordion-icon]").classList.add("-rotate-180"):i._triggerEl.querySelector("[data-accordion-icon]").classList.remove("-rotate-180")}};this.detailCollapse=new y(this.$refs.detailCollapseMenu,this.$refs.detailCollapseBtn,n),this.detailCollapse.collapse(),this.getOrder()}},I={class:"pt-8"},O=T(`<section class="mx-auto w-full md:w-[28rem] h-32 md:h-40 rounded-lg backdrop-blur-[2px] border" style="background:linear-gradient(
          142.88deg,
          rgba(255, 255, 255, 0.16) 8.09%,
          rgba(255, 255, 255, 0.064) 27.24%,
          rgba(255, 255, 255, 0.064) 34.42%,
          rgba(255, 255, 255, 0.1088) 48.78%,
          rgba(255, 255, 255, 0) 100%
        );"><div class="flex justify-center items-center pt-6 sm:pt-4 md:pt-7"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 sm:w-10 md:w-12 h-8 sm:h-10 md:h-12"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z"></path></svg><h1 class="text-lg sm:text-2xl md:text-3xl ml-4">付款成功</h1></div><h3 class="text-md sm:text-xl md:text-2xl text-center mt-4"> 感謝您的購買，我們會盡快出貨 </h3></section>`,1),P={class:"mt-10 flex justify-center"},q={class:"grid grid-cols-5 gap-6"},D={class:"col-span-full lg:col-span-3 mt-8"},z={class:"border-2 rounded-lg overflow-hidden"},R=e("h1",{class:"p-4 bg-black/50 text-xl font-bold border-b-2"},"訂單資訊",-1),$={class:"mx-auto text-md md:text-lg p-8"},F={class:"mb-4 leading-loose md:flex justify-between"},H=e("p",null,"訂單編號：",-1),U={class:"mb-4 leading-loose md:flex justify-between"},G=e("p",null,"訂單日期：",-1),J={class:"mb-4"},K={type:"button",ref:"detailCollapseBtn",class:"flex justify-around items-center w-28 focus:outline-none font-medium rounded-lg text-sm text-white p-1.5 bg-secondary hover:bg-secondary2"},Q=e("p",null,"訂單內容",-1),W=e("svg",{"data-accordion-icon":"",class:"w-6 h-6 shrink-0 duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13l-3 3m0 0l-3-3m3 3V8m0 13a9 9 0 110-18 9 9 0 010 18z"})],-1),X=[Q,W],Y={ref:"detailCollapseMenu",class:"px-2 md:px-4 border-2 rounded"},Z=["src"],ee={class:"col-span-full md:col-span-4 flex flex-col justify-between"},se={class:"text-md xl:text-lg"},te={class:"text-lg xl:text-xl mt-2 lg:mt-3"},oe={class:"flex flex-col sm:flex-row justify-between"},le={class:"flex mt-1 sm:mt-0 sm:ml-4"},ne={class:"flex flex-col sm:flex-row justify-between items-center"},de={key:0,class:"flex items-center self-start mt-4"},ie={class:"text-md lg:text-lg"},re={key:1},ae={class:"self-end text-lg lg:text-xl mt-4"},ce={class:"font-bold"},_e={key:0,class:"border-t border-gray-300"},he={class:"text-warm text-lg py-4 text-end"},ue={class:"mb-4 leading-loose md:flex justify-between"},me=e("p",null,"付款方式：",-1),pe={class:"leading-loose md:flex justify-between"},fe=e("p",null,"訂單金額：",-1),ge={class:"font-bold"},xe={class:"col-span-full lg:col-span-2"},be={class:"lg:pt-8 sticky top-nav"},we={class:"border-2 rounded-lg overflow-hidden"},ve=e("h1",{class:"p-4 bg-black/50 text-xl font-bold border-b-2"}," 訂購人資訊 ",-1),ye={class:"px-8 py-8"},ke={class:"mb-4 leading-loose md:flex justify-between"},je=e("p",null,"訂購人姓名：",-1),Ce={class:"mb-4 leading-loose md:flex justify-between"},Ee=e("p",null,"訂購人電話：",-1),Se={class:"mb-4 leading-loose md:flex justify-between"},Te=e("p",null,"訂購人Email：",-1),Ve={class:"mb-4 leading-loose md:flex justify-between"},Ae=e("p",null,"訂購人地址：",-1),Be={key:0,class:"mb-2"},Le={key:1,class:"leading-loose text-sm"};function Me(n,i,r,Ne,t,Ie){var u,m,p,f,g;const b=V("router-link");return l(),o(c,null,[e("div",I,[O,e("div",P,[E(b,{to:{name:"商品列表"},replace:"",class:"w-40 primary-button"},{default:S(()=>[h("繼續購物")]),_:1})])]),e("div",q,[e("div",D,[e("section",z,[R,e("div",$,[e("h5",F,[H,e("span",null,s(t.order.id),1)]),e("h5",U,[G,e("span",null,s(n.$filters.date(t.order.create_at)),1)]),e("div",J,[e("button",K,X,512),e("div",Y,[(l(!0),o(c,null,x(t.order.products,(d,w,v)=>(l(),o("div",{class:A(["py-8 grid grid-cols-5 gap-4",{"border-t":v>0}]),key:w},[e("img",{src:d.product.imageUrl,alt:"",class:"hidden md:flex w-full h-16 xl:h-24 object-cover rounded bg-white"},null,8,Z),e("div",ee,[e("h2",se,s(d.product.brand),1),e("h3",te,s(d.product.title),1),(l(!0),o(c,null,x(d.cart_spec,a=>(l(),o("div",{class:"flex items-start sm:items-center mt-4 text-md xl:text-lg",key:a.title},[e("div",oe,[h(" 規格："+s(a.title)+" ",1),e("div",le," 數量："+s(a.qty),1)])]))),128)),e("div",ne,[d.cart_spec?(l(),o("div",re)):(l(),o("div",de,[e("span",ie,"數量："+s(d.qty),1)])),e("h5",ae,[h(" 總計："),e("span",ce,"NT$ "+s(n.$filters.currency(d.final_total)),1)])])])],2))),128)),t.discount?(l(),o("div",_e,[e("p",he," 折扣："+s(t.discount),1)])):_("",!0)],512)]),e("h5",ue,[me,e("span",null,s((u=t.order.user)==null?void 0:u.pay),1)]),e("h5",pe,[fe,e("span",ge,"NT$ "+s(n.$filters.currency(t.order.total)),1)])])])]),e("div",xe,[e("div",be,[e("section",we,[ve,e("div",ye,[e("h5",ke,[je,e("span",null,s((m=t.order.user)==null?void 0:m.name),1)]),e("h5",Ce,[Ee,e("span",null,s((p=t.order.user)==null?void 0:p.tel),1)]),e("h5",Se,[Te,e("span",null,s((f=t.order.user)==null?void 0:f.email),1)]),e("h5",Ve,[Ae,e("span",null,s((g=t.order.user)==null?void 0:g.address),1)]),t.order.message?(l(),o("h5",Be,"訂購人備註：")):_("",!0),t.order.message?(l(),o("p",Le,s(t.order.message),1)):_("",!0)])])])])])],64)}const De=k(N,[["render",Me]]);export{De as default};
