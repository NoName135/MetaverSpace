import{P as J,D as Q}from"./DeleteModal-489c2954.js";import{C as W,U as Y}from"./ckeditor-845de182.js";import{M as Z}from"./index-9908806f.js";import{o as r,j as _,N as y,d as n,e as m,i as b,O as A,F as S,g as B,t as w,P,f as g,T as U,w as L,h as v,a as F,l as z,_ as G,r as O,c as a,b as i,v as x,x as ee,u as E,y as te,n as se}from"./index-bcb3825a.js";import{s as K}from"./swal-e4da1902.js";function T(e){return e===0?!1:Array.isArray(e)&&e.length===0?!0:!e}function ie(e){return(...t)=>!e(...t)}function oe(e,t){return e===void 0&&(e="undefined"),e===null&&(e="null"),e===!1&&(e="false"),e.toString().toLowerCase().indexOf(t.trim())!==-1}function q(e,t,o,u){return t?e.filter(s=>oe(u(s,o),t)).sort((s,d)=>u(s,o).length-u(d,o).length):e}function le(e){return e.filter(t=>!t.$isLabel)}function I(e,t){return o=>o.reduce((u,s)=>s[e]&&s[e].length?(u.push({$groupLabel:s[t],$isLabel:!0}),u.concat(s[e])):u,[])}function re(e,t,o,u,s){return d=>d.map(l=>{if(!l[o])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const f=q(l[o],e,t,s);return f.length?{[u]:l[u],[o]:f}:[]})}const $=(...e)=>t=>e.reduce((o,u)=>u(o),t);var ne={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(e,t){return T(e)?"":t?e[t]:e}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const e=this.search||"",t=e.toLowerCase().trim();let o=this.options.concat();return this.internalSearch?o=this.groupValues?this.filterAndFlat(o,t,this.label):q(o,t,this.label,this.customLabel):o=this.groupValues?I(this.groupValues,this.groupLabel)(o):o,o=this.hideSelected?o.filter(ie(this.isSelected)):o,this.taggable&&t.length&&!this.isExistingOption(t)&&(this.tagPosition==="bottom"?o.push({isTag:!0,label:e}):o.unshift({isTag:!0,label:e})),o.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(e=>e[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(t=>this.customLabel(t,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(e,t,o){return $(re(t,o,this.groupValues,this.groupLabel,this.customLabel),I(this.groupValues,this.groupLabel))(e)},flatAndStrip(e){return $(I(this.groupValues,this.groupLabel),le)(e)},updateSearch(e){this.search=e},isExistingOption(e){return this.options?this.optionKeys.indexOf(e)>-1:!1},isSelected(e){const t=this.trackBy?e[this.trackBy]:e;return this.valueKeys.indexOf(t)>-1},isOptionDisabled(e){return!!e.$isDisabled},getOptionLabel(e){if(T(e))return"";if(e.isTag)return e.label;if(e.$isLabel)return e.$groupLabel;const t=this.customLabel(e,this.label);return T(t)?"":t},select(e,t){if(e.$isLabel&&this.groupSelect){this.selectGroup(e);return}if(!(this.blockKeys.indexOf(t)!==-1||this.disabled||e.$isDisabled||e.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(t==="Tab"&&!this.pointerDirty)){if(e.isTag)this.$emit("tag",e.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(e)){t!=="Tab"&&this.removeElement(e);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([e])):this.$emit("update:modelValue",e),this.$emit("select",e,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(e){const t=this.options.find(o=>o[this.groupLabel]===e.$groupLabel);if(t){if(this.wholeGroupSelected(t)){this.$emit("remove",t[this.groupValues],this.id);const o=this.internalValue.filter(u=>t[this.groupValues].indexOf(u)===-1);this.$emit("update:modelValue",o)}else{let o=t[this.groupValues].filter(u=>!(this.isOptionDisabled(u)||this.isSelected(u)));this.max&&o.splice(this.max-this.internalValue.length),this.$emit("select",o,this.id),this.$emit("update:modelValue",this.internalValue.concat(o))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(e){return e[this.groupValues].every(t=>this.isSelected(t)||this.isOptionDisabled(t))},wholeGroupDisabled(e){return e[this.groupValues].every(this.isOptionDisabled)},removeElement(e,t=!0){if(this.disabled||e.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const o=typeof e=="object"?this.valueKeys.indexOf(e[this.trackBy]):this.valueKeys.indexOf(e);if(this.multiple){const u=this.internalValue.slice(0,o).concat(this.internalValue.slice(o+1));this.$emit("update:modelValue",u)}else this.$emit("update:modelValue",null);this.$emit("remove",e,this.id),this.closeOnSelect&&t&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const e=this.$el.getBoundingClientRect().top,t=window.innerHeight-this.$el.getBoundingClientRect().bottom;t>this.maxHeight||t>e||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(t-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(e-40,this.maxHeight))}}},ae={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(e,t){return{"multiselect__option--highlight":e===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(t)}},groupHighlight(e,t){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":t.$isLabel}];const o=this.options.find(u=>u[this.groupLabel]===t.$groupLabel);return o&&!this.wholeGroupDisabled(o)?["multiselect__option--group",{"multiselect__option--highlight":e===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(o)}]:"multiselect__option--disabled"},addPointerElement({key:e}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],e),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(e){this.pointer=e,this.pointerDirty=!0}}},X={name:"vue-multiselect",mixins:[ne,ae],props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:e=>`and ${e} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const de={ref:"tags",class:"multiselect__tags"},ce={class:"multiselect__tags-wrap"},ue={class:"multiselect__spinner"},pe={key:0},he={class:"multiselect__option"},me={class:"multiselect__option"},ge=v("No elements found. Consider changing the search query."),fe={class:"multiselect__option"},be=v("List is empty.");function ye(e,t,o,u,s,d){return r(),_("div",{tabindex:e.searchable?-1:o.tabindex,class:[{"multiselect--active":e.isOpen,"multiselect--disabled":o.disabled,"multiselect--above":d.isAbove,"multiselect--has-options-group":d.hasOptionGroup},"multiselect"],onFocus:t[14]||(t[14]=l=>e.activate()),onBlur:t[15]||(t[15]=l=>e.searchable?!1:e.deactivate()),onKeydown:[t[16]||(t[16]=P(m(l=>e.pointerForward(),["self","prevent"]),["down"])),t[17]||(t[17]=P(m(l=>e.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:t[18]||(t[18]=P(m(l=>e.addPointerElement(l),["stop","self"]),["enter","tab"])),onKeyup:t[19]||(t[19]=P(l=>e.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+e.id},[y(e.$slots,"caret",{toggle:e.toggle},()=>[n("div",{onMousedown:t[1]||(t[1]=m(l=>e.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),y(e.$slots,"clear",{search:e.search}),n("div",de,[y(e.$slots,"selection",{search:e.search,remove:e.removeElement,values:d.visibleValues,isOpen:e.isOpen},()=>[b(n("div",ce,[(r(!0),_(S,null,B(d.visibleValues,(l,f)=>y(e.$slots,"tag",{option:l,search:e.search,remove:e.removeElement},()=>[(r(),_("span",{class:"multiselect__tag",key:f},[n("span",{textContent:w(e.getOptionLabel(l))},null,8,["textContent"]),n("i",{tabindex:"1",onKeypress:P(m(k=>e.removeElement(l),["prevent"]),["enter"]),onMousedown:m(k=>e.removeElement(l),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[A,d.visibleValues.length>0]]),e.internalValue&&e.internalValue.length>o.limit?y(e.$slots,"limit",{key:0},()=>[n("strong",{class:"multiselect__strong",textContent:w(o.limitText(e.internalValue.length-o.limit))},null,8,["textContent"])]):g("v-if",!0)]),n(U,{name:"multiselect__loading"},{default:L(()=>[y(e.$slots,"loading",{},()=>[b(n("div",ue,null,512),[[A,o.loading]])])]),_:3}),e.searchable?(r(),_("input",{key:0,ref:"search",name:o.name,id:e.id,type:"text",autocomplete:"off",spellcheck:"false",placeholder:e.placeholder,style:d.inputStyle,value:e.search,disabled:o.disabled,tabindex:o.tabindex,onInput:t[2]||(t[2]=l=>e.updateSearch(l.target.value)),onFocus:t[3]||(t[3]=m(l=>e.activate(),["prevent"])),onBlur:t[4]||(t[4]=m(l=>e.deactivate(),["prevent"])),onKeyup:t[5]||(t[5]=P(l=>e.deactivate(),["esc"])),onKeydown:[t[6]||(t[6]=P(m(l=>e.pointerForward(),["prevent"]),["down"])),t[7]||(t[7]=P(m(l=>e.pointerBackward(),["prevent"]),["up"])),t[9]||(t[9]=P(m(l=>e.removeLastElement(),["stop"]),["delete"]))],onKeypress:t[8]||(t[8]=P(m(l=>e.addPointerElement(l),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+e.id},null,44,["name","id","placeholder","value","disabled","tabindex","aria-controls"])):g("v-if",!0),d.isSingleLabelVisible?(r(),_("span",{key:1,class:"multiselect__single",onMousedown:t[10]||(t[10]=m((...l)=>e.toggle&&e.toggle(...l),["prevent"]))},[y(e.$slots,"singleLabel",{option:d.singleValue},()=>[v(w(e.currentOptionLabel),1)])],32)):g("v-if",!0),d.isPlaceholderVisible?(r(),_("span",{key:2,class:"multiselect__placeholder",onMousedown:t[11]||(t[11]=m((...l)=>e.toggle&&e.toggle(...l),["prevent"]))},[y(e.$slots,"placeholder",{},()=>[v(w(e.placeholder),1)])],32)):g("v-if",!0)],512),n(U,{name:"multiselect"},{default:L(()=>[b(n("div",{class:"multiselect__content-wrapper",onFocus:t[12]||(t[12]=(...l)=>e.activate&&e.activate(...l)),tabindex:"-1",onMousedown:t[13]||(t[13]=m(()=>{},["prevent"])),style:{maxHeight:e.optimizedHeight+"px"},ref:"list"},[n("ul",{class:"multiselect__content",style:d.contentStyle,role:"listbox",id:"listbox-"+e.id},[y(e.$slots,"beforeList"),e.multiple&&e.max===e.internalValue.length?(r(),_("li",pe,[n("span",he,[y(e.$slots,"maxElements",{},()=>[v("Maximum of "+w(e.max)+" options selected. First remove a selected option to select another.",1)])])])):g("v-if",!0),!e.max||e.internalValue.length<e.max?(r(!0),_(S,{key:1},B(e.filteredOptions,(l,f)=>(r(),_("li",{class:"multiselect__element",key:f,id:e.id+"-"+f,role:l&&(l.$isLabel||l.$isDisabled)?null:"option"},[l&&(l.$isLabel||l.$isDisabled)?g("v-if",!0):(r(),_("span",{key:0,class:[e.optionHighlight(f,l),"multiselect__option"],onClick:m(k=>e.select(l),["stop"]),onMouseenter:m(k=>e.pointerSet(f),["self"]),"data-select":l&&l.isTag?e.tagPlaceholder:d.selectLabelText,"data-selected":d.selectedLabelText,"data-deselect":d.deselectLabelText},[y(e.$slots,"option",{option:l,search:e.search,index:f},()=>[n("span",null,w(e.getOptionLabel(l)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),l&&(l.$isLabel||l.$isDisabled)?(r(),_("span",{key:1,"data-select":e.groupSelect&&d.selectGroupLabelText,"data-deselect":e.groupSelect&&d.deselectGroupLabelText,class:[e.groupHighlight(f,l),"multiselect__option"],onMouseenter:m(k=>e.groupSelect&&e.pointerSet(f),["self"]),onMousedown:m(k=>e.selectGroup(l),["prevent"])},[y(e.$slots,"option",{option:l,search:e.search,index:f},()=>[n("span",null,w(e.getOptionLabel(l)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):g("v-if",!0)],8,["id","role"]))),128)):g("v-if",!0),b(n("li",null,[n("span",me,[y(e.$slots,"noResult",{search:e.search},()=>[ge])])],512),[[A,o.showNoResults&&e.filteredOptions.length===0&&e.search&&!o.loading]]),b(n("li",null,[n("span",fe,[y(e.$slots,"noOptions",{},()=>[be])])],512),[[A,o.showNoOptions&&(e.options.length===0||d.hasOptionGroup===!0&&e.filteredOptions.length===0)&&!e.search&&!o.loading]]),y(e.$slots,"afterList")],12,["id"])],36),[[A,e.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}X.render=ye;const{VITE_API:H,VITE_PATH:N}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"metaverspace",VITE_RENDER_API:"https://metarverspace-server.onrender.com",BASE_URL:"/MetaverSpace/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},ve={props:["page","accessories"],mixins:[K],data(){return{isNew:!0,tempProduct:{},isNewAccessory:!1,accessoryPlaceholder:"",accessoryDisable:!1,accessoryOptions:[],editor:W,descriptionConfig:{toolbar:["heading","bold","italic","|","undo","redo","|","numberedList","bulletedList","|","link"]},contentConfig:{toolbar:["heading","bold","italic","|","undo","redo","|","numberedList","bulletedList","outdent","indent","|","link","insertTable"]}}},methods:{openModal(e,t){e==="new"?(this.isNew=!0,this.tempProduct={imagesUrl:[],category:"",unit:"件",spec:[],accessory:[],contentImages:[],is_enabled:0},this.productModal.show()):(this.isNewAccessory=!0,this.isNew=!1,this.tempProduct={...t},this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[]),this.tempProduct.spec||(this.tempProduct.spec=[]),this.tempProduct.accessory||(this.tempProduct.accessory=[]),this.tempProduct.contentImages||(this.tempProduct.contentImages=[]),this.productModal.show()),this.$refs.productModal.scrollTop=0,this.changeAccessory()},updateProduct(){let e="post",t=`${H}/api/${N}/admin/product`;this.isNew||(e="put",t=`${H}/api/${N}/admin/product/${this.tempProduct.id}`),this.loadings.fullLoading=!0,this.$http[e](t,{data:this.tempProduct}).then(()=>{this.$emit("updateProducts",this.page,"update"),this.productModal.hide(),this.tempProduct.brand=""}).catch(o=>{this.adminToast("error",o.response.data.message)})},changeImage(e,t,o){t==="imageUrl"?this.tempProduct[t]=o:t==="imagesUrl"?this.tempProduct[t][e]=o:this.tempProduct[t][e]=o,t!=="imageUrl"&&this.$refs.productModal.scrollTo({top:this.$refs.productModal.scrollHeight})},changeAccessory(){this.accessoryOptions=[],this.accessories.forEach(e=>{var t;e.brand.toLowerCase()===((t=this.tempProduct.brand)==null?void 0:t.toLowerCase())&&this.accessoryOptions.push({id:e.id,name:e.title})})}},computed:{...F(z,["loadings"])},watch:{"tempProduct.brand"(){this.tempProduct.accessory.forEach((e,t)=>{this.accessories.some(o=>o.id===e.id)||(this.tempProduct.accessory.splice(t,1),this.accessories.length>0&&this.adminAlert("warning","請更新商品","已刪除不存在的配件，請記得點擊確認更新商品資訊！"))}),this.isNewAccessory||(this.tempProduct.accessory=[]),this.isNewAccessory=!1},tempProduct:{handler(){!this.tempProduct.brand||!this.tempProduct.category?(this.accessoryPlaceholder="請先輸入品牌及類別",this.accessoryDisable=!0):(this.accessoryPlaceholder="關鍵字搜尋",this.accessoryDisable=!1),this.tempProduct.origin_price<1&&(this.tempProduct.origin_price=null),this.tempProduct.price>this.tempProduct.origin_price&&(this.tempProduct.price=this.tempProduct.origin_price)},deep:!0}},mounted(){const e={placement:"center",backdrop:"static",backdropClasses:"bg-black bg-opacity-80 fixed inset-0 z-30",closable:!0};this.productModal=new Z(this.$refs.productModal,e)},components:{UploadImg:Y,Multiselect:X}},we={ref:"productModal",id:"productModal",tabindex:"-1",class:"hidden fixed z-40 w-full px-4 overflow-x-hidden overflow-y-auto top-28 left-0 right-0 h-auto"},_e={class:"w-full max-w-7xl h-full max-h-[calc(100vh-8.5rem)]"},Pe={class:"bg-white shadow rounded-lg overflow-hidden"},ke={class:"flex items-start justify-between p-4 border-b bg-black top-[6rem] w-[calc(100%-2rem)] lg:w-[calc(100%-3rem)] max-w-7xl z-50 rounded-t-lg fixed"},Ve=i("h3",{class:"text-xl font-semibold text-gray-300"},"編輯商品",-1),xe=i("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[i("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),Le=[xe],Se={class:"p-6 grid grid-cols-3 gap-6 mt-12"},Oe={class:"col-span-1"},Me=i("label",{for:"mainImgLink",class:"font-medium"},[v("主要圖片 (輸入網址或上傳圖片)"),i("span",{class:"font-bold text-rose-500"},"*")],-1),Be={class:"relative mt-4"},Ae=i("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 text-gray-500"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418"})])],-1),Ce=i("span",null,null,-1),Te=i("span",null,null,-1),Ie=["src"],Ee={class:"mt-8 space-y-4"},De=i("h3",{class:"font-medium"},"多圖新增 (輸入網址或上傳圖片)",-1),Ue={class:"relative mt-4"},$e=i("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 text-gray-500"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418"})])],-1),He=["onUpdate:modelValue"],Ne=i("span",null,null,-1),je=i("span",null,null,-1),Re=["src"],Fe=["onClick"],ze={class:"col-span-2 space-y-6"},Ge=i("label",{for:"name",class:"block mb-2 font-medium"},[v("商品名稱"),i("span",{class:"font-bold text-rose-500"},"*")],-1),Ke={class:"grid grid-cols-2 gap-4"},qe=i("label",{for:"modalDistrict",class:"block mb-2 text-md font-medium text-gray-900"},[v("類別"),i("span",{class:"font-bold text-rose-500"},"*")],-1),Xe=te('<option value="" selected disabled>請選擇商品類別</option><option value="AR">AR (擴增實境)</option><option value="VR">VR (虛擬實境)</option><option value="MR">MR (混合實境)</option><option value="XR">XR (延展實境)</option><option value="配件">商品配件</option>',6),Je=[Xe],Qe=i("label",{for:"brand",class:"block mb-2 font-medium"},[v("品牌"),i("span",{class:"font-bold text-rose-500"},"*")],-1),We={class:"grid grid-cols-2 gap-4"},Ye=i("label",{for:"origin_price",class:"block mb-2 font-medium"},[v("原價"),i("span",{class:"font-bold text-rose-500"},"*")],-1),Ze=i("label",{for:"price",class:"block mb-2 font-medium"},[v("售價 (請先輸入原價)"),i("span",{class:"font-bold text-rose-500"},"*")],-1),et=i("label",{for:"spec",class:"font-medium"},"商品規格",-1),tt={class:"grid grid-cols-6 gap-1 mt-2"},st={class:"border rounded"},it=["onUpdate:modelValue"],ot=["onClick"],lt={key:0},rt={key:0},nt=i("label",{class:"typo__label"},"選擇配件",-1),at=i("h3",{for:"message",class:"mb-2 font-medium text-gray-900"}," 商品功能簡介 ",-1),dt={class:"prose max-w-full prose-p:my-0"},ct=i("h3",{for:"message",class:"mb-2 font-medium text-gray-900"}," 商品詳細內容 ",-1),ut={class:"prose max-w-full prose-p:my-0"},pt={class:"mt-8 space-y-4"},ht=i("h3",{class:"font-medium"},"商品詳細內容圖庫",-1),mt={class:"grid grid-cols-4 gap-3"},gt={class:"relative"},ft=i("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 text-gray-500"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418"})])],-1),bt=["onUpdate:modelValue"],yt=i("span",null,null,-1),vt=i("span",null,null,-1),wt=["src","alt"],_t=["onClick"],Pt={class:"pt-4 flex justify-between items-center border-t-2 border-gray-300"},kt={class:"flex"},Vt={class:"relative inline-flex items-center cursor-pointer"},xt=["checked"],Lt=i("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-teal-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-teal-600"},null,-1),St=i("span",{class:"ml-3 text-md font-medium text-gray-900"},"上架商品",-1),Ot={class:"flex justify-end"},Mt=["disabled","title"];function Bt(e,t,o,u,s,d){var c,M,D;const l=O("UploadImg"),f=O("FontAwesomeIcon"),k=O("Multiselect"),C=O("ckeditor");return r(),a("div",we,[i("div",_e,[i("div",Pe,[i("div",ke,[Ve,i("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-600 hover:text-white rounded-lg text-sm p-1.5 ml-auto inline-flex items-center",onClick:t[0]||(t[0]=()=>{e.productModal.hide(),s.tempProduct.brand=""})},Le)]),i("div",Se,[i("div",Oe,[Me,i("div",Be,[Ae,b(i("input",{type:"text",id:"mainImgLink",class:"block w-full p-3 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-teal-500 focus:border-teal-500",placeholder:"請輸入圖片網址",required:"","onUpdate:modelValue":t[1]||(t[1]=p=>s.tempProduct.imageUrl=p)},null,512),[[x,s.tempProduct.imageUrl,void 0,{lazy:!0}]])]),n(l,{onChangeImg:d.changeImage},{multi:L(()=>[Ce]),detail:L(()=>[Te]),_:1},8,["onChangeImg"]),s.tempProduct.imageUrl?(r(),a("img",{key:0,src:s.tempProduct.imageUrl,class:"mt-4 w-full h-80 object-cover object-center"},null,8,Ie)):g("",!0),i("div",Ee,[De,(r(!0),a(S,null,B(s.tempProduct.imagesUrl,(p,h)=>(r(),a(S,{key:h},[i("div",Ue,[$e,b(i("input",{type:"text",id:"mainImgLink",class:"block w-full p-3 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-teal-500 focus:border-teal-500",placeholder:"請輸入圖片網址","onUpdate:modelValue":V=>s.tempProduct.imagesUrl[h]=V},null,8,He),[[x,s.tempProduct.imagesUrl[h],void 0,{lazy:!0}]])]),n(l,{index:h,onChangeImg:d.changeImage},{main:L(()=>[Ne]),detail:L(()=>[je]),_:2},1032,["index","onChangeImg"]),s.tempProduct.imagesUrl[h]?(r(),a("img",{key:0,src:s.tempProduct.imagesUrl[h],class:"mt-4 w-full h-80 object-cover object-center"},null,8,Re)):g("",!0),s.tempProduct.imagesUrl[h]?g("",!0):(r(),a("button",{key:1,type:"button",class:"mt-4 admin-delete-button w-full",onClick:V=>s.tempProduct.imagesUrl.splice(h,1)}," 刪除區塊 ",8,Fe))],64))),128)),!((c=s.tempProduct.imagesUrl)!=null&&c.length)||s.tempProduct.imagesUrl[s.tempProduct.imagesUrl.length-1]?(r(),a("button",{key:0,type:"button",class:"mt-4 admin-secondary-button w-full",onClick:t[2]||(t[2]=p=>s.tempProduct.imagesUrl.push(""))}," 新增圖片 ")):g("",!0)])]),i("div",ze,[i("div",null,[Ge,b(i("input",{type:"text",id:"name",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5",required:"","onUpdate:modelValue":t[3]||(t[3]=p=>s.tempProduct.title=p)},null,512),[[x,s.tempProduct.title]])]),i("div",Ke,[i("div",null,[qe,b(i("select",{id:"modalDistrict",class:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block p-2.5","onUpdate:modelValue":t[4]||(t[4]=p=>s.tempProduct.category=p)},Je,512),[[ee,s.tempProduct.category]])]),i("div",null,[Qe,b(i("input",{type:"text",id:"brand",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5",required:"","onUpdate:modelValue":t[5]||(t[5]=p=>s.tempProduct.brand=p),onChange:t[6]||(t[6]=p=>d.changeAccessory())},null,544),[[x,s.tempProduct.brand,void 0,{lazy:!0}]])])]),i("div",We,[i("div",null,[Ye,b(i("input",{type:"number",id:"origin_price",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5",min:"1",required:"","onUpdate:modelValue":t[7]||(t[7]=p=>s.tempProduct.origin_price=p)},null,512),[[x,s.tempProduct.origin_price,void 0,{lazy:!0}]])]),i("div",null,[Ze,b(i("input",{type:"number",id:"price",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block w-full p-2.5",min:"1",required:"","onUpdate:modelValue":t[8]||(t[8]=p=>s.tempProduct.price=p)},null,512),[[x,s.tempProduct.price,void 0,{lazy:!0}]])])]),i("div",null,[et,i("div",tt,[(r(!0),a(S,null,B(s.tempProduct.spec,(p,h)=>(r(),a("div",{class:"relative",key:h},[i("div",st,[b(i("input",{type:"text",class:"w-[calc(100%-1.9rem)] rounded-l-lg text-sm border-gray-300 focus:ring-violet-300",id:"spec","onUpdate:modelValue":V=>s.tempProduct.spec[h]=V,placeholder:"請輸入規格"},null,8,it),[[x,s.tempProduct.spec[h]]]),i("button",{type:"button",class:"absolute w-8 top-0 right-0 px-3 py-2 admin-delete-solid-button rounded-l-none rounded-r-lg border text-sm",onClick:V=>s.tempProduct.spec.splice(h,1)},[n(f,{icon:["fas","xmark"]})],8,ot)])]))),128)),!((M=s.tempProduct.spec)!=null&&M.length)||s.tempProduct.spec[s.tempProduct.spec.length-1]?(r(),a("div",lt,[i("button",{type:"button",class:"admin-secondary-solid-button w-full py-2",onClick:t[9]||(t[9]=p=>s.tempProduct.spec.push(""))}," 新增規格 ")])):g("",!0)])]),s.tempProduct.category!="配件"?(r(),a("div",rt,[nt,n(k,{modelValue:s.tempProduct.accessory,"onUpdate:modelValue":t[10]||(t[10]=p=>s.tempProduct.accessory=p),label:"name","track-by":"id",multiple:!0,placeholder:s.accessoryPlaceholder,options:s.accessoryOptions,disabled:s.accessoryDisable,class:"mt-2"},null,8,["modelValue","placeholder","options","disabled"])])):g("",!0),i("div",null,[at,i("div",dt,[n(C,{editor:s.editor,config:s.descriptionConfig,modelValue:s.tempProduct.description,"onUpdate:modelValue":t[11]||(t[11]=p=>s.tempProduct.description=p)},null,8,["editor","config","modelValue"])])]),i("div",null,[ct,i("div",ut,[n(C,{editor:s.editor,config:s.contentConfig,modelValue:s.tempProduct.content,"onUpdate:modelValue":t[12]||(t[12]=p=>s.tempProduct.content=p)},null,8,["editor","config","modelValue"])])]),i("div",pt,[ht,i("div",mt,[(r(!0),a(S,null,B(s.tempProduct.contentImages,(p,h)=>(r(),a("div",{key:h},[i("div",gt,[ft,b(i("input",{type:"text",id:"mainImgLink",class:"block w-full p-3 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-teal-500 focus:border-teal-500",placeholder:"請輸入圖片網址","onUpdate:modelValue":V=>s.tempProduct.contentImages[h]=V},null,8,bt),[[x,s.tempProduct.contentImages[h],void 0,{lazy:!0}]])]),n(l,{index:h,onChangeImg:d.changeImage},{main:L(()=>[yt]),multi:L(()=>[vt]),_:2},1032,["index","onChangeImg"]),s.tempProduct.contentImages[h]?(r(),a("img",{key:0,src:s.tempProduct.contentImages[h],class:"mt-4 w-full h-36 object-cover object-center rounded",alt:`商品詳細圖片${h}`},null,8,wt)):g("",!0),s.tempProduct.contentImages[h]?g("",!0):(r(),a("button",{key:1,type:"button",class:"mt-4 admin-delete-button w-full",onClick:V=>s.tempProduct.contentImages.splice(h,1)}," 刪除區塊 ",8,_t))]))),128)),!((D=s.tempProduct.contentImages)!=null&&D.length)||s.tempProduct.contentImages[s.tempProduct.contentImages.length-1]?(r(),a("button",{key:0,type:"button",class:"admin-secondary-button w-full h-11",onClick:t[13]||(t[13]=p=>s.tempProduct.contentImages.push(""))}," 新增圖片 ")):g("",!0)])]),i("div",Pt,[i("div",kt,[i("label",Vt,[b(i("input",{type:"checkbox",class:"sr-only peer","true-value":1,"false-value":0,checked:s.tempProduct.is_enabled,"onUpdate:modelValue":t[14]||(t[14]=p=>s.tempProduct.is_enabled=p)},null,8,xt),[[E,s.tempProduct.is_enabled]]),Lt,St])]),i("div",Ot,[i("button",{type:"button",class:"admin-delete-button",onClick:t[15]||(t[15]=()=>{e.productModal.hide(),s.tempProduct.brand=""})}," 取消 "),i("button",{type:"button",class:"ml-6 admin-primary-button",disabled:!s.tempProduct.imageUrl||!s.tempProduct.title||!s.tempProduct.brand||!s.tempProduct.category||!s.tempProduct.origin_price||!s.tempProduct.price,title:[!s.tempProduct.imageUrl||!s.tempProduct.title||!s.tempProduct.brand||!s.tempProduct.category||!s.tempProduct.origin_price||!s.tempProduct.price?'"*"號為必填欄位':""],onClick:t[16]||(t[16]=p=>d.updateProduct())}," 確認 ",8,Mt)])])])])])])],512)}const At=G(ve,[["render",Bt]]),{VITE_API:j,VITE_PATH:R}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"metaverspace",VITE_RENDER_API:"https://metarverspace-server.onrender.com",BASE_URL:"/MetaverSpace/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Ct={mixins:[K],data(){return{ascending:!1,sortBy:"",allProducts:[],products:[],pagination:{},showAccessory:!0,accessories:[],productLoading:[]}},methods:{getProducts(e=1,t){this.accessories=[],this.loadings.fullLoading=!0,this.$http.get(`${j}/api/${R}/admin/products/all`).then(o=>{this.allProducts=Object.values(o.data.products).reverse(),this.showAccessory||(this.allProducts=this.allProducts.filter(s=>s.category!=="配件")),this.products=this.allProducts.filter((s,d)=>Math.ceil((d+1)/10)===e),this.accessories=Object.values(o.data.products).filter(s=>s.category==="配件");const u=Math.ceil(Object.keys(this.allProducts).length/10);this.pagination={total_pages:u,current_page:e,has_pre:e!==1,has_next:e!==u},this.loadings.fullLoading=!1,t==="update"?this.adminToast("success","已更新商品資料"):t==="delete"&&this.adminToast("success","已刪除商品資料")}).catch(o=>{this.loadings.fullLoading=!1,this.adminToast("error",o.response.data.message)})},changePages(e=1){this.products=Object.values(this.allProducts).filter((t,o)=>Math.ceil((o+1)/10)===e),this.pagination.current_page=e,this.pagination.has_pre=e!==1,this.pagination.has_next=e!==this.pagination.total_pages,window.scrollTo({top:0,behavior:"smooth"})},updateEnable(e){this.productLoading.push(e.id),this.$http.put(`${j}/api/${R}/admin/product/${e.id}`,{data:e}).then(()=>{this.productLoading.shift(),this.adminToast("success","已更新啟用狀態")}).catch(t=>{this.productLoading.shift(),this.adminToast("error",t.response.data.message),this.getProducts(this.page.current_page)})}},mounted(){this.productModal=this.$refs.productModal,this.deleteModal=this.$refs.deleteModal,this.getProducts()},computed:{...F(z,["loadings"]),sortProducts(){return this.sortBy==="category"||this.sortBy==="brand"?[...this.products].sort((e,t)=>this.ascending?e[this.sortBy].localeCompare(t[this.sortBy],"zh-hant"):t[this.sortBy].localeCompare(e[this.sortBy],"zh-hant")):this.sortBy?[...this.products].sort((e,t)=>this.ascending?e[this.sortBy]-t[this.sortBy]:t[this.sortBy]-e[this.sortBy]):this.products}},components:{Pagination:J,ProductModal:At,DeleteModal:Q}},Tt={class:"mt-8 px-6"},It={class:"flex justify-between items-center"},Et={class:"flex"},Dt={class:"relative inline-flex items-center cursor-pointer"},Ut=["checked"],$t=i("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-teal-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-teal-600"},null,-1),Ht=i("span",{class:"ml-3 text-md font-medium text-gray-900"},"顯示配件",-1),Nt={class:"mt-6 relative overflow-x-auto shadow-md sm:rounded-lg"},jt={class:"w-full text-md text-left text-gray-700"},Rt={class:"text-sm text-dark uppercase bg-gray-300"},Ft=i("th",{scope:"col",class:"sr-only"},"Loading",-1),zt={key:0,class:"text-xs"},Gt={key:0},Kt={key:1},qt={key:1},Xt={key:0},Jt={key:0},Qt={key:1},Wt={key:1},Yt={key:0,class:"text-xs"},Zt={key:0},es={key:1},ts={key:1},ss=i("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap"},"商品名稱",-1),is=i("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap"},"原價",-1),os={key:0,class:"text-xs"},ls={key:0},rs={key:1},ns={key:1},as=i("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap"},[i("span",{class:"sr-only"},"選項")],-1),ds={class:"px-3 w-6 max-w-[1.5rem]"},cs={key:0,class:"animate-spin h-5 w-5 mr-3 text-dark",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},us=i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),ps=i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),hs=[us,ps],ms={class:"px-6 font-medium whitespace-nowrap"},gs={class:"w-9"},fs=["disabled","checked","onUpdate:modelValue","onChange"],bs=i("div",{class:"w-full h-5 bg-gray-500 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-teal-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all border-gray-300 peer-checked:bg-teal-600"},null,-1),ys={class:"px-6 py-4 whitespace-nowrap"},vs={class:"px-6 py-4 whitespace-nowrap"},ws={class:"px-6 py-4 whitespace-nowrap"},_s={class:"px-6 py-4 whitespace-nowrap"},Ps={class:"px-6 py-4 whitespace-nowrap"},ks={class:"px-6 py-4 whitespace-nowrap flex justify-center space-x-6"},Vs=["disabled","onClick"],xs=["disabled","onClick"];function Ls(e,t,o,u,s,d){const l=O("FontAwesomeIcon"),f=O("Pagination"),k=O("ProductModal"),C=O("DeleteModal");return r(),a(S,null,[i("div",Tt,[i("div",It,[i("button",{type:"button",class:"admin-primary-button",onClick:t[0]||(t[0]=c=>e.productModal.openModal("new"))}," 新增商品 "),i("div",Et,[i("label",Dt,[b(i("input",{type:"checkbox",class:"sr-only peer",checked:s.showAccessory,"onUpdate:modelValue":t[1]||(t[1]=c=>s.showAccessory=c),onChange:t[2]||(t[2]=c=>d.getProducts())},null,40,Ut),[[E,s.showAccessory]]),$t,Ht])])]),i("div",Nt,[i("table",jt,[i("thead",Rt,[i("tr",null,[Ft,i("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap cursor-pointer",onClick:t[3]||(t[3]=c=>{s.sortBy="is_enabled",s.ascending=s.sortBy==="is_enabled"?!s.ascending:!0})},[v(" 上架 "),s.sortBy==="is_enabled"?(r(),a("span",zt,[s.ascending?(r(),a("span",Gt,[n(l,{icon:["fas","sort-up"]})])):(r(),a("span",Kt,[n(l,{icon:["fas","sort-down"]})]))])):(r(),a("span",qt,[n(l,{icon:["fas","sort"]})]))]),i("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap cursor-pointer",onClick:t[4]||(t[4]=c=>{s.sortBy="category",s.ascending=s.sortBy==="category"?!s.ascending:!0})},[v(" 類別 "),s.sortBy==="category"?(r(),a("span",Xt,[s.ascending?(r(),a("span",Jt,[n(l,{icon:["fas","sort-up"]})])):(r(),a("span",Qt,[n(l,{icon:["fas","sort-down"]})]))])):(r(),a("span",Wt,[n(l,{icon:["fas","sort"]})]))]),i("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap cursor-pointer",onClick:t[5]||(t[5]=c=>{s.sortBy="brand",s.ascending=s.sortBy==="brand"?!s.ascending:!0})},[v(" 品牌 "),s.sortBy==="brand"?(r(),a("span",Yt,[s.ascending?(r(),a("span",Zt,[n(l,{icon:["fas","sort-up"]})])):(r(),a("span",es,[n(l,{icon:["fas","sort-down"]})]))])):(r(),a("span",ts,[n(l,{icon:["fas","sort"]})]))]),ss,is,i("th",{scope:"col",class:"px-6 py-3 whitespace-nowrap cursor-pointer",onClick:t[6]||(t[6]=c=>{s.sortBy="price",s.ascending=s.sortBy==="price"?!s.ascending:!0})},[v(" 售價 "),s.sortBy==="price"?(r(),a("span",os,[s.ascending?(r(),a("span",ls,[n(l,{icon:["fas","sort-up"]})])):(r(),a("span",rs,[n(l,{icon:["fas","sort-down"]})]))])):(r(),a("span",ns,[n(l,{icon:["fas","sort"]})]))]),as])]),i("tbody",null,[(r(!0),a(S,null,B(d.sortProducts,c=>(r(),a("tr",{class:"bg-white border-b hover:bg-teal-100",key:c.id},[i("td",ds,[s.productLoading.indexOf(c.id)>-1?(r(),a("svg",cs,hs)):g("",!0)]),i("td",ms,[i("div",gs,[i("label",{class:se(["relative",s.productLoading.indexOf(c.id)>-1?"cursor-not-allowed":" cursor-pointer"])},[b(i("input",{type:"checkbox",class:"sr-only peer disabled:ring-4","true-value":1,"false-value":0,disabled:s.productLoading.indexOf(c.id)>-1,checked:c.is_enabled,"onUpdate:modelValue":M=>c.is_enabled=M,onChange:M=>d.updateEnable(c)},null,40,fs),[[E,c.is_enabled]]),bs],2)])]),i("td",ys,w(c.category),1),i("td",vs,w(c.brand),1),i("td",ws,w(c.title),1),i("td",_s,w(e.$filters.currency(c.origin_price)),1),i("td",Ps,w(e.$filters.currency(c.price)),1),i("td",ks,[i("button",{type:"button",disabled:s.productLoading.indexOf(c.id)>-1,class:"admin-secondary-button px-3.5 py-1.5",onClick:M=>e.productModal.openModal("edit",c)}," 編輯 ",8,Vs),i("button",{type:"button",disabled:s.productLoading.indexOf(c.id)>-1,class:"admin-delete-button px-3.5 py-1.5",onClick:M=>e.deleteModal.openModal("商品",c)}," 刪除 ",8,xs)])]))),128))])])]),n(f,{class:"mt-8","page-obj":s.pagination,onEmitPage:d.changePages},null,8,["page-obj","onEmitPage"])]),n(k,{ref:"productModal",page:s.pagination.current_page,accessories:s.accessories,onUpdateProducts:d.getProducts},null,8,["page","accessories","onUpdateProducts"]),n(C,{ref:"deleteModal",page:s.products.length>1?s.pagination.current_page:s.pagination.current_page-1,onUpdateProducts:d.getProducts},null,8,["page","onUpdateProducts"])],64)}const Cs=G(Ct,[["render",Ls]]);export{Cs as default};
